# Application properties for auth-service (example values; do NOT store real secrets here)
# Use environment variables to override secrets in production.

spring.application.name=auth-service

# Keycloak / OIDC
app.security.issuer-uri=${KEYCLOAK_ISSUER_URI:http://keycloak:8080/realms/ebanking}
app.security.jwk-set-uri=${KEYCLOAK_JWK_SET_URI:${app.security.issuer-uri}/protocol/openid-connect/certs}
app.security.client-id=${KEYCLOAK_CLIENT_ID:auth-service}
app.security.client-secret=${KEYCLOAK_CLIENT_SECRET:change-me}
app.security.realm=${KEYCLOAK_REALM:ebanking}
app.security.resource-id=${KEYCLOAK_RESOURCE_ID:auth-api}
spring.config.import=optional:configserver:http://config-server:8888/

# Optional scopes
app.security.scope.sso=${AUTH_SCOPE_SSO:openid}
app.security.scope.mfa=${AUTH_SCOPE_MFA:mfa}

# Server port
server.port=${SERVER_PORT:8082}

# Resource server config
spring.security.oauth2.resourceserver.jwt.issuer-uri=${app.security.issuer-uri}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${app.security.jwk-set-uri}

# OAuth2 client registration (used by UI or swagger if enabled)
spring.security.oauth2.client.registration.keycloak.client-id=${app.security.client-id}
spring.security.oauth2.client.registration.keycloak.client-secret=${app.security.client-secret}
spring.security.oauth2.client.registration.keycloak.scope=${app.security.scope.sso}
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

spring.security.oauth2.client.provider.keycloak.issuer-uri=${app.security.issuer-uri}

# Management
management.endpoints.web.exposure.include=health,info

# Admin client for Keycloak admin API (use env vars for secrets)
app.security.admin-client-id=${KEYCLOAK_ADMIN_CLIENT_ID:auth-service}
app.security.admin-client-secret=${KEYCLOAK_ADMIN_CLIENT_SECRET:change-me}

# Api documentation config
springdoc.api-docs.path=/v3/api-docs/api-doc.yaml
springdoc.swagger-ui.path=/v3/api-docs/swagger-ui.html
springdoc.api-docs.version=openapi_3_1

# Eureka Client (Docker/Eureka)
eureka.client.service-url.defaultZone=http://discovery:8761/eureka
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
